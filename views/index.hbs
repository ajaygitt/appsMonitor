<link href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.10.24/js/dataTables.bootstrap4.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/js/bootstrap-select.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.9/dist/css/bootstrap-select.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/timepicker/1.3.5/jquery.timepicker.min.js"></script>

{{!-- toggle cdn --}}
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>











<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <h4><a class="navbar-brand" href="/">Home</a></h4>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav"
    aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">

      <li class="nav-item">
        <h4> <a class="nav-link" style="padding-left: 200px;" href="#" onclick="schedules()"> Schedules</a></h4>
      </li>
      <li class="nav-item">
        <h4> <a class="nav-link" href="#" style="padding-left: 200px;" onclick="restrictions()">Restrictions</a></h4>
      </li>
      <li class="nav-item">
        <h4> <a class="nav-link " style="padding-left: 200px;" href="#" onclick="setLimit()">Set Limit</a> </h4>
      </li>
      <li class="nav-item">
        <h4> <a class="nav-link " style="padding-left: 100px;" href="#">Logout</a> </h4>
      </li>
    </ul>
  </div>
</nav>


<div>

  {{!-- home --}}


  <div id="home">
    <button class="btn btn-primary" style="margin-left: 80%;" class="btn btn-success btn-block mb-2" data-toggle="modal"
      data-target="#modal"> Add new Application</button>


    <div id="modal" class="modal fade" data-backdrop="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title text-md">This will be your modal title</div> <button class="close"
              data-dismiss="modal">&times;</button>
          </div>
          <div class="modal-body">
            <div class="p-4 text-center">
              <form id="addApp" name="addApp">

                <label for="app name">Application name</label> <input type="text" id="appName" name="appName"
                  class="form-control" placeholder="Application Name">
                <label for="package name">Package Name</label><input type="text" name="packageName" id="packageName"
                  class="form-control" value="com.">

            </div>
          </div>
          <div class="modal-footer"> <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Add this App</button> </div>
        </div>
        </form>
      </div>
    </div>








    <table id="example" class="table table-striped table-bordered" style="width:100%">
      <thead>
        <tr>
          <th>Application Name</th>
          <th>Package name</th>
          <th>added on</th>
        
        </tr>
      </thead>
      <tbody>
        {{#each applications}}
        <tr>
          <td>{{this.appName}}</td>
          <td>{{this.packageName}}</td>
          <td>{{this.date}} @ {{this.time}}</td>
         
        </tr>
        {{/each}}
      </tbody>

    </table>
  </div>

  {{!-- home end --}}












  {{!-- schedule start --}}
  <div id="schedules" style="display: none;">

    <h3 style="padding-left: 43%; di">Schedules</h3>





    <button class="btn btn-primary" style="margin-left: 80%;" class="btn btn-success btn-block mb-2" data-toggle="modal"
      data-target="#scheduleModal"> Add new Scehdyle</button>

    {{!-- modal --}}
    <div id="scheduleModal" class="modal fade" data-backdrop="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <div class="modal-title text-md">Add a new schedule Here</div> <button class="close"
              data-dismiss="#scheduleModal">&times;</button>
          </div>
          <div class="modal-body">
            <div class="p-4 text-center">
              <form id="submitSchedule" name="submitSchedule" method="POST" action="/addSchedule">

                <div class="row">
                  <div class="col-lg-6 mx-auto">
                    <label class="text-black mb-3 lead">select the day(s)</label>
                    <!-- Multiselect dropdown -->
                    <select multiple data-style="bg-white rounded-pill px-4 py-3 shadow-sm " name="days" id="days"
                      class="selectpicker w-100">
                      <option value="Mon">Monday</option>
                      <option value="Tue">Tuesday</option>
                      <option value="Wed">Wednesday</option>
                      <option value="Thu">Thursday</option>
                      <option value="Fri">Friday</option>
                      <option value="Sat">Saturday</option>
                      <option value="Sun">Sunday</option>
                    </select><!-- End -->
                  </div>
                </div>



                <div class="row">

                  <label for="package name">From</label><input type="time" name="fromTime" id="fromTime"
                    class="form-control" value="com.">
                  <label for="package name">To</label><input type="time" name="toTime" id="toTime" class="form-control"
                    value="com.">


                </div>
            </div>
          </div>
          <div class="modal-footer"> <button type="button" class="btn btn-light" data-dismiss="modal">Close</button>
            <button type="submit" class="btn btn-primary">Add this App</button> </div>
        </div>
        </form>
      </div>
    </div>







    <div style="padding-left: 5%;"></div>
    <div class="row" style="padding-left: 5%;">

      {{#each schedules}}
      <div class="card" style="width: 18rem;">

        <div style="background-color:lightblue;">
          <h5>Work time</h5>


        </div>

        <div class="card-body">

          <div class="row">
            
            <span class="dot" id="monday">
              <p class="text-inside">{{this.day1}} </p>
            </span>
            <span class="dot" id="tuesday">
              <p class="text-inside"> {{this.day2}} </p>
            </span>
            <span class="dot" id="wednesday">
              <p class="text-inside">{{this.day3}}</p>
            </span>
            <span class="dot" id="thursday">
              <p class="text-inside">{{this.day4}}</p>
            </span>

            <span class="dot" id="friday">
              <p class="text-inside">{{this.day5}}</p>
            </span>
            <span class="dot" id="saturday">
              <p class="text-inside">{{this.day6}}</p>
            </span>

            <span class="dot" id="sunday">
              <p class="text-inside">{{this.day7}}</p>
            </span>
          </div>

          <p class="card-text" style="margin-top: 5%;"> From : {{this.fromTime}}  To:{{this.toTime}} </p>
          {{!-- <a href="#" class="btn btn-primary">Go somewhere</a> --}}
        </div>
      </div>
      {{/each}}
    </div>





  </div>
  {{!-- schedule end --}}


  <!------restrictions start ---------->

  <div id="restrictions" style="display:none">

    



 <table id="example" class="table table-striped table-bordered" style="width:100%">
      <thead>
        <tr>
          <th>Working time</th>
        
          <th> Non-Working Time </th>
        </tr>
      </thead>
      <tbody>
        {{#each blockedApps}}
        <tr>

          <div class="row">
          <td>{{this.appName}}
            <div class="form-check form-switch">
  <label class="switch">
  <input type="checkbox" checked>
  <span class="slider round"></span>
</label>
</div>
         </div>   
             </td>
        </tr>
        {{/each}}
      </tbody>

    </table>

















</div>

{{!-- end of restrictions tab --}}







<script>

  function schedules() {

    $('#home').hide()
    $('#restrictions').hide()
    $('#schedules').show()
  }

  function restrictions() {
    $('#schedules').hide()
    $('#restrictions').show()
 $('#home').hide()

  }
  function addNewApplication() {

    alert('')
  }








  //datatable

  $(document).ready(function () {
    $('#example').DataTable();
  });
  $(document).ready(function () {
    $('input.timepicker').timepicker({});
  });

  $(function () {
    $('.selectpicker').selectpicker();
  });

  $(function() {
    $('#toggle-two').bootstrapToggle({
      on: 'blocked',
      off: 'unblocked'
    });
  })



  $("#addApp").validate({
    rules: {
      appName: {
        required: true,
        minlength: 3
      },
      packageName: {

        required: true,
        minlength: 3
      }
    },


    submitHandler: function (my_form) {



      let appName = $('#appName').val()
      let packageName = $('#packageName').val()

      $.ajax({

        url: '/addApplication',
        method: 'post',
        data: {
          appName,
          packageName
        },
        success: (response) => {

          if (response.status == true) {
            alert('Application inserted')
            window.location.reload();
          }
          else {
            alert('An application with the same name already exists')
          }
        }


      })


    }
  })









  $("#submitSchedule").validate({
    rules: {
      days: {
        required: true
      },
      fromTime: {

        required: true
      },
      toTime: {
        required: true
      }
    },


    
  })










</script>




</div>





















</div>
<style>


.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}









  .text-inside {

    margin-left: 25%;
    text-align: center;
    font-size: smaller;
    display: inline-block;

  }

  .container {
    margin-top: 100px
  }


  .bootstrap-select .bs-ok-default::after {
    width: 0.3em;
    height: 0.6em;
    border-width: 0 0.1em 0.1em 0;
    transform: rotate(45deg) translateY(0.5rem);
  }

  .btn.dropdown-toggle:focus {
    outline: none !important;
  }

  .dot {
    height: 25px;
    width: 25px;
    background-color: #bbb;
    border-radius: 50%;
    display: inline-block;
    margin-left: 4%;
  }

  body {
    padding: 10px;

  }

  #exTab1 .tab-content {
    color: white;
    background-color: #428bca;
    padding: 5px 15px;
  }

  #exTab2 h3 {
    color: white;
    background-color: #428bca;
    padding: 5px 15px;
  }

  /* remove border radius for the tab */

  #exTab1 .nav-pills>li>a {
    border-radius: 0;
  }

  /* change border radius for the tab , apply corners on top*/

  #exTab3 .nav-pills>li>a {
    border-radius: 4px 4px 0 0;
  }

  #exTab3 .tab-content {
    color: white;
    background-color: #428bca;
    padding: 5px 15px;
  }
</style>